{"remainingRequest":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/babel-loader/lib/index.js!/Users/lijiayu/Downloads/shangcheng-main/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lijiayu/Downloads/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lijiayu/Downloads/shangcheng-main/src/components/main/Update-pswd.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/lijiayu/Downloads/shangcheng-main/src/components/main/Update-pswd.vue","mtime":1669541729000},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/cache-loader/dist/cjs.js","mtime":1669614083651},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/babel-loader/lib/index.js","mtime":1669614084006},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/cache-loader/dist/cjs.js","mtime":1669614083651},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1669614084013}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9saWppYXl1L0Rvd25sb2Fkcy9zaGFuZ2NoZW5nLW1haW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQsIHJlYWN0aXZlLCByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gInZ1ZXgiOwppbXBvcnQgbWQ1IGZyb20gImpzLW1kNSI7CmltcG9ydCB7IEVsTWVzc2FnZSwgRWxMb2FkaW5nIH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHsgcG9zdFVwZGF0ZVBzd2QgfSBmcm9tICJAL2FwaS91c2VyIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbInhnbW1CdG4iXSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIGNvbnRleHQpIHsKICAgIC8vIOe7meeItue7hOS7tuS8oOWPggogICAgLy8gY29udGV4dC5lbWl0KCdidXNzcycsJ3RydWUnKQogICAgLy8g6I635Y+WZG9t5YWD57Sg5L2/55SoCiAgICB2YXIgcnVsZUZvcm0gPSByZWYobnVsbCk7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwoKICAgIHZhciB2YWxpZGF0ZVBhc3MgPSBmdW5jdGlvbiB2YWxpZGF0ZVBhc3MocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeaWsOWvhueggSIpKTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPCA2KSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLmgqjovpPlhaXmlrDlr4bnoIHplb/luqblsI/kuo425L2NIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChkYXRhLnJ1bGVGb3JtLmNoZWNrUGFzcyAhPT0gIiIpIHsKICAgICAgICAgIHJ1bGVGb3JtLnZhbHVlLnZhbGlkYXRlRmllbGQoImNoZWNrUGFzcyIpOwogICAgICAgIH0KCiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgdmFsaWRhdGVQYXNzMiA9IGZ1bmN0aW9uIHZhbGlkYXRlUGFzczIocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+WGjeasoei+k+WFpeWvhueggSIpKTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gZGF0YS5ydWxlRm9ybS5wYXNzKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLkuKTmrKHovpPlhaXlr4bnoIHkuI3kuIDoh7QhIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIGRhdGEgPSByZWFjdGl2ZSh7CiAgICAgIHVzZXJuYW1lOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLnVzZXIudXNlckxpc3QudXNlcm5hbWU7CiAgICAgIH0pLAogICAgICBydWxlRm9ybTogewogICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICBwYXNzOiAnJywKICAgICAgICBjaGVja1Bhc3M6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXljp/lp4vlr4bnoIEiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiA2LAogICAgICAgICAgbWVzc2FnZTogJ+aCqOi+k+WFpeeahOWOn+Wni+WvhueggemVv+W6puWwj+S6jjbkvY0nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcGFzczogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBjaGVja1Bhc3M6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzMiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0KICAgIH0pOwoKICAgIHZhciBwb3N0VXBkYXRlVXNlclB3ZHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShkb2MpIHsKICAgICAgICB2YXIgbG9hZGluZywgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBsb2FkaW5nID0gRWxMb2FkaW5nLnNlcnZpY2UoewogICAgICAgICAgICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgICAgICAgICAgICB0ZXh0OiAn5q2j5Zyo5Yqg6L295LitJywKICAgICAgICAgICAgICAgICAgc3Bpbm5lcjogJ2VsLWljb24tbG9hZGluZycsCiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIDAuNyknCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHBvc3RVcGRhdGVQc3dkKGRvYyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIWRhdGEpOwoKICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+acjeWKoeWZqOW8guW4uOivt+iBlOezu+euoeeQhuWRmCcpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMjAwMCkgewogICAgICAgICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgIHByb3BzLnhnbW1CdG4oZmFsc2UpOwogICAgICAgICAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcyh7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gcG9zdFVwZGF0ZVVzZXJQd2RzKF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgc3VibWl0Rm9ybSA9IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgcnVsZUZvcm0udmFsdWUudmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB2YXIgX2RhdGEkcnVsZUZvcm0gPSBkYXRhLnJ1bGVGb3JtLAogICAgICAgICAgICAgIHBhc3MgPSBfZGF0YSRydWxlRm9ybS5wYXNzLAogICAgICAgICAgICAgIHBhc3N3b3JkID0gX2RhdGEkcnVsZUZvcm0ucGFzc3dvcmQ7CgogICAgICAgICAgaWYgKHBhc3MgPT0gcGFzc3dvcmQpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfkv67mlLnlr4bnoIHkuI3lj6/ku6XkuI7ljp/lp4vlr4bnoIHkuIDmoLcnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBwc3cxID0gcGFyc2VJbnQocGFzc3dvcmQsIDE2KS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHBzdzIgPSBwYXJzZUludChwYXNzLCAxNikudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciB5c3Bhc3N3b3JkID0gbWQ1KHBzdzEpOwogICAgICAgICAgdmFyIHBhc3N3b3JkcyA9IG1kNShwc3cyKTsKICAgICAgICAgIHBvc3RVcGRhdGVVc2VyUHdkcyh7CiAgICAgICAgICAgIHVzZXJuYW1lOiBkYXRhLnVzZXJuYW1lLAogICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRzLAogICAgICAgICAgICB5c3Bhc3N3b3JkOiB5c3Bhc3N3b3JkCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIGRhdGE6IGRhdGEsCiAgICAgIHJ1bGVGb3JtOiBydWxlRm9ybSwKICAgICAgc3VibWl0Rm9ybTogc3VibWl0Rm9ybQogICAgfTsKICB9Cn07"},{"version":3,"sources":["/Users/lijiayu/Downloads/shangcheng-main/src/components/main/Update-pswd.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-form\n    :model=\"data.ruleForm\"\n    :rules=\"data.rules\"\n    ref=\"ruleForm\"\n    label-width=\"100px\"\n    class=\"demo-ruleForm\"\n  >\n    <el-form-item label=\"原始密码\" prop=\"password\">\n      <el-input  type=\"password\" v-model=\"data.ruleForm.password\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"新密码\" prop=\"pass\">\n      <el-input\n        type=\"password\"\n        v-model=\"data.ruleForm.pass\"\n        autocomplete=\"off\"\n      ></el-input>\n    </el-form-item>\n    <el-form-item label=\"确认密码\" prop=\"checkPass\">\n      <el-input\n        type=\"password\"\n        v-model=\"data.ruleForm.checkPass\"\n        autocomplete=\"off\"\n      ></el-input>\n    </el-form-item>\n    <el-form-item class=\"btn-box\">\n      <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">保存</el-button>\n      <el-button @click=\"xgmmBtn(false)\">取消</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport { computed, reactive,ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport md5 from \"js-md5\";\nimport { ElMessage,ElLoading } from 'element-plus';\nimport { postUpdatePswd } from \"@/api/user\";\n\nexport default {\n  props: [\"xgmmBtn\"],\n  setup(props, context) {\n    // 给父组件传参\n    // context.emit('busss','true')\n    // 获取dom元素使用\n    let ruleForm = ref(null)\n    const store = useStore();\n     let validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入新密码\"));\n      } else if (value.length < 6) {\n        callback(new Error(\"您输入新密码长度小于6位\"));\n      } else {\n        if (data.ruleForm.checkPass !== \"\") {\n          ruleForm.value.validateField(\"checkPass\");\n        }\n        callback();\n      }\n    };\n    let validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== data.ruleForm.pass) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    let data = reactive({\n      username: computed(() => store.state.user.userList.username),\n      ruleForm:{\n        password:'',\n        pass:'',\n        checkPass:'',\n      },\n      rules: {\n        password: [\n          { required: true, message: \"请输入原始密码\", trigger: \"blur\" },\n          {\n              min: 6,\n              message: '您输入的原始密码长度小于6位',\n              trigger: 'blur',\n          },\n        ],\n        pass: [{ required: true, validator: validatePass, trigger: \"blur\" }],\n        checkPass: [\n          { required: true, validator: validatePass2, trigger: \"blur\" },\n        ],\n      },\n     \n    })\n    let postUpdateUserPwds = async(doc)=>{\n      const loading = ElLoading.service({\n          lock: true,\n          text: '正在加载中',\n          spinner: 'el-icon-loading',\n          background: 'rgba(0, 0, 0, 0.7)',\n      });\n      let data = await postUpdatePswd(doc);\n      console.log(!data)\n      if(!data){\n        loading.close();\n        ElMessage.error('服务器异常请联系管理员');\n        return\n      }\n      if (data.code == 2000) {\n        loading.close();\n        props.xgmmBtn(false)\n        ElMessage.success({\n          message: \"修改成功\",\n          type: \"success\",\n        });\n      } else {\n        loading.close();\n        ElMessage.error(data.message);\n      }\n    }\n   let submitForm = (formName) =>{\n    \n      ruleForm.value.validate((valid) => {\n          if (valid) {\n            let { pass,password } = data.ruleForm;\n            if(pass==password){\n               ElMessage.error('修改密码不可以与原始密码一样');\n              return \n            }\n            let psw1 = parseInt(password, 16).toString();\n            let psw2 = parseInt(pass, 16).toString();\n            let yspassword = md5(psw1);\n            let passwords = md5(psw2);\n            postUpdateUserPwds({\n              username:data.username,\n              password:passwords,\n              yspassword\n            });\n          } else {\n            return false;\n          }\n      })\n    }\n    return {\n      data,\n      ruleForm,\n      submitForm,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n\n\n.btn-box {\n  text-align: center;\n}\n.demo-ruleForm{\n  max-height: 70vh;\n  overflow: hidden;\n  overflow-y: scroll;\n  padding: 10px 30px;\n}\n</style>\n\n\n"],"sourceRoot":""}]}