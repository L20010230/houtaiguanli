{"remainingRequest":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/babel-loader/lib/index.js!/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/components/main/Update-pswd.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/components/main/Update-pswd.vue","mtime":1669541729000},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/cache-loader/dist/cjs.js","mtime":1669614083651},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/babel-loader/lib/index.js","mtime":1669614084006},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/cache-loader/dist/cjs.js","mtime":1669614083651},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1669614084013}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9saWppYXl1L2FsaWppYXl1L2ppYXl1YW4vc2hhbmdjaGVuZy1tYWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IGNvbXB1dGVkLCByZWFjdGl2ZSwgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IG1kNSBmcm9tICJqcy1tZDUiOwppbXBvcnQgeyBFbE1lc3NhZ2UsIEVsTG9hZGluZyB9IGZyb20gJ2VsZW1lbnQtcGx1cyc7CmltcG9ydCB7IHBvc3RVcGRhdGVQc3dkIH0gZnJvbSAiQC9hcGkvdXNlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWyJ4Z21tQnRuIl0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBjb250ZXh0KSB7CiAgICAvLyDnu5nniLbnu4Tku7bkvKDlj4IKICAgIC8vIGNvbnRleHQuZW1pdCgnYnVzc3MnLCd0cnVlJykKICAgIC8vIOiOt+WPlmRvbeWFg+e0oOS9v+eUqAogICAgdmFyIHJ1bGVGb3JtID0gcmVmKG51bGwpOwogICAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKCiAgICB2YXIgdmFsaWRhdGVQYXNzID0gZnVuY3Rpb24gdmFsaWRhdGVQYXNzKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXmlrDlr4bnoIEiKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUubGVuZ3RoIDwgNikgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5oKo6L6T5YWl5paw5a+G56CB6ZW/5bqm5bCP5LqONuS9jSIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZGF0YS5ydWxlRm9ybS5jaGVja1Bhc3MgIT09ICIiKSB7CiAgICAgICAgICBydWxlRm9ybS52YWx1ZS52YWxpZGF0ZUZpZWxkKCJjaGVja1Bhc3MiKTsKICAgICAgICB9CgogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIHZhbGlkYXRlUGFzczIgPSBmdW5jdGlvbiB2YWxpZGF0ZVBhc3MyKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7flho3mrKHovpPlhaXlr4bnoIEiKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IGRhdGEucnVsZUZvcm0ucGFzcykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5Lik5qyh6L6T5YWl5a+G56CB5LiN5LiA6Ie0ISIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwoKICAgIHZhciBkYXRhID0gcmVhY3RpdmUoewogICAgICB1c2VybmFtZTogY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS51c2VyLnVzZXJMaXN0LnVzZXJuYW1lOwogICAgICB9KSwKICAgICAgcnVsZUZvcm06IHsKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgcGFzczogJycsCiAgICAgICAgY2hlY2tQYXNzOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHBhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5Y6f5aeL5a+G56CBIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0sIHsKICAgICAgICAgIG1pbjogNiwKICAgICAgICAgIG1lc3NhZ2U6ICfmgqjovpPlhaXnmoTljp/lp4vlr4bnoIHplb/luqblsI/kuo425L2NJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHBhc3M6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgY2hlY2tQYXNzOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzczIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9KTsKCiAgICB2YXIgcG9zdFVwZGF0ZVVzZXJQd2RzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZG9jKSB7CiAgICAgICAgdmFyIGxvYWRpbmcsIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbG9hZGluZyA9IEVsTG9hZGluZy5zZXJ2aWNlKHsKICAgICAgICAgICAgICAgICAgbG9jazogdHJ1ZSwKICAgICAgICAgICAgICAgICAgdGV4dDogJ+ato+WcqOWKoOi9veS4rScsCiAgICAgICAgICAgICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLCAwLCAwLCAwLjcpJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBwb3N0VXBkYXRlUHN3ZChkb2MpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCFkYXRhKTsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfmnI3liqHlmajlvILluLjor7fogZTns7vnrqHnkIblkZgnKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDIwMDApIHsKICAgICAgICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICBwcm9wcy54Z21tQnRuKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkv67mlLnmiJDlip8iLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKGRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIHBvc3RVcGRhdGVVc2VyUHdkcyhfeCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgdmFyIHN1Ym1pdEZvcm0gPSBmdW5jdGlvbiBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHJ1bGVGb3JtLnZhbHVlLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdmFyIF9kYXRhJHJ1bGVGb3JtID0gZGF0YS5ydWxlRm9ybSwKICAgICAgICAgICAgICBwYXNzID0gX2RhdGEkcnVsZUZvcm0ucGFzcywKICAgICAgICAgICAgICBwYXNzd29yZCA9IF9kYXRhJHJ1bGVGb3JtLnBhc3N3b3JkOwoKICAgICAgICAgIGlmIChwYXNzID09IHBhc3N3b3JkKSB7CiAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5L+u5pS55a+G56CB5LiN5Y+v5Lul5LiO5Y6f5aeL5a+G56CB5LiA5qC3Jyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcHN3MSA9IHBhcnNlSW50KHBhc3N3b3JkLCAxNikudG9TdHJpbmcoKTsKICAgICAgICAgIHZhciBwc3cyID0gcGFyc2VJbnQocGFzcywgMTYpLnRvU3RyaW5nKCk7CiAgICAgICAgICB2YXIgeXNwYXNzd29yZCA9IG1kNShwc3cxKTsKICAgICAgICAgIHZhciBwYXNzd29yZHMgPSBtZDUocHN3Mik7CiAgICAgICAgICBwb3N0VXBkYXRlVXNlclB3ZHMoewogICAgICAgICAgICB1c2VybmFtZTogZGF0YS51c2VybmFtZSwKICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkcywKICAgICAgICAgICAgeXNwYXNzd29yZDogeXNwYXNzd29yZAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICBkYXRhOiBkYXRhLAogICAgICBydWxlRm9ybTogcnVsZUZvcm0sCiAgICAgIHN1Ym1pdEZvcm06IHN1Ym1pdEZvcm0KICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/components/main/Update-pswd.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-form\n    :model=\"data.ruleForm\"\n    :rules=\"data.rules\"\n    ref=\"ruleForm\"\n    label-width=\"100px\"\n    class=\"demo-ruleForm\"\n  >\n    <el-form-item label=\"原始密码\" prop=\"password\">\n      <el-input  type=\"password\" v-model=\"data.ruleForm.password\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"新密码\" prop=\"pass\">\n      <el-input\n        type=\"password\"\n        v-model=\"data.ruleForm.pass\"\n        autocomplete=\"off\"\n      ></el-input>\n    </el-form-item>\n    <el-form-item label=\"确认密码\" prop=\"checkPass\">\n      <el-input\n        type=\"password\"\n        v-model=\"data.ruleForm.checkPass\"\n        autocomplete=\"off\"\n      ></el-input>\n    </el-form-item>\n    <el-form-item class=\"btn-box\">\n      <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">保存</el-button>\n      <el-button @click=\"xgmmBtn(false)\">取消</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport { computed, reactive,ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport md5 from \"js-md5\";\nimport { ElMessage,ElLoading } from 'element-plus';\nimport { postUpdatePswd } from \"@/api/user\";\n\nexport default {\n  props: [\"xgmmBtn\"],\n  setup(props, context) {\n    // 给父组件传参\n    // context.emit('busss','true')\n    // 获取dom元素使用\n    let ruleForm = ref(null)\n    const store = useStore();\n     let validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入新密码\"));\n      } else if (value.length < 6) {\n        callback(new Error(\"您输入新密码长度小于6位\"));\n      } else {\n        if (data.ruleForm.checkPass !== \"\") {\n          ruleForm.value.validateField(\"checkPass\");\n        }\n        callback();\n      }\n    };\n    let validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== data.ruleForm.pass) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    let data = reactive({\n      username: computed(() => store.state.user.userList.username),\n      ruleForm:{\n        password:'',\n        pass:'',\n        checkPass:'',\n      },\n      rules: {\n        password: [\n          { required: true, message: \"请输入原始密码\", trigger: \"blur\" },\n          {\n              min: 6,\n              message: '您输入的原始密码长度小于6位',\n              trigger: 'blur',\n          },\n        ],\n        pass: [{ required: true, validator: validatePass, trigger: \"blur\" }],\n        checkPass: [\n          { required: true, validator: validatePass2, trigger: \"blur\" },\n        ],\n      },\n     \n    })\n    let postUpdateUserPwds = async(doc)=>{\n      const loading = ElLoading.service({\n          lock: true,\n          text: '正在加载中',\n          spinner: 'el-icon-loading',\n          background: 'rgba(0, 0, 0, 0.7)',\n      });\n      let data = await postUpdatePswd(doc);\n      console.log(!data)\n      if(!data){\n        loading.close();\n        ElMessage.error('服务器异常请联系管理员');\n        return\n      }\n      if (data.code == 2000) {\n        loading.close();\n        props.xgmmBtn(false)\n        ElMessage.success({\n          message: \"修改成功\",\n          type: \"success\",\n        });\n      } else {\n        loading.close();\n        ElMessage.error(data.message);\n      }\n    }\n   let submitForm = (formName) =>{\n    \n      ruleForm.value.validate((valid) => {\n          if (valid) {\n            let { pass,password } = data.ruleForm;\n            if(pass==password){\n               ElMessage.error('修改密码不可以与原始密码一样');\n              return \n            }\n            let psw1 = parseInt(password, 16).toString();\n            let psw2 = parseInt(pass, 16).toString();\n            let yspassword = md5(psw1);\n            let passwords = md5(psw2);\n            postUpdateUserPwds({\n              username:data.username,\n              password:passwords,\n              yspassword\n            });\n          } else {\n            return false;\n          }\n      })\n    }\n    return {\n      data,\n      ruleForm,\n      submitForm,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n\n\n.btn-box {\n  text-align: center;\n}\n.demo-ruleForm{\n  max-height: 70vh;\n  overflow: hidden;\n  overflow-y: scroll;\n  padding: 10px 30px;\n}\n</style>\n\n\n"],"sourceRoot":""}]}