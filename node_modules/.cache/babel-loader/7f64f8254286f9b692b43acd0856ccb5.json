{"remainingRequest":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/babel-loader/lib/index.js!/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/api/api.js","dependencies":[{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/api/api.js","mtime":1669691695621},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/cache-loader/dist/cjs.js","mtime":1669614083651},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/babel-loader/lib/index.js","mtime":1669614084006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vIOivt+axguaOpeWPowppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgcm91dGVyIGZyb20gJy4uL3JvdXRlcic7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtcGx1cyc7IC8vIOiuvue9rum7mOiupOiuv+mXrui3r+W+hAoKYXhpb3MuZGVmYXVsdHMuYmFzZVVSTCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfRVhURVJOQUxfTElOSzsKYXhpb3MuZGVmYXVsdHMudGltZW91dCA9IDIwMDA7IC8vIOWcqOWwgeijhWF4aW9z55qE5paH5Lu25Lit5re75Yqg5oum5oiq5ZmoCi8vIOa3u+WKoOivt+axguaLpuaIquWZqO+8jOWcqOivt+axguWktOS4reWKoHRva2VuCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGNvbmZpZy5jYWNoZSA9IGZhbHNlOwogIHZhciB1c2VyTGlzdCA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlckxpc3QnKSk7IC8vIOWIpOaWreacrOWcsOeahGNvb2tpZeS4reaYr+WQpuaciXRva2VuCgogIGlmICh1c2VyTGlzdCkgewogICAgY29uc29sZS5sb2codXNlckxpc3QpOwoKICAgIGlmICh1c2VyTGlzdC50b2tlbikgewogICAgICBjb25maWcuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddID0gdXNlckxpc3QudG9rZW47CiAgICB9CiAgfSBlbHNlIHsvLyDot7PovazliLDnmbvlvZXpobXpnaIo6L+Z6YeM5L2/55Socm91dGVy77yM5piv5Zug5Li66Lev55Sx5paH5Lu25byV5YWl5Yiw5LqG5q2k5paH5Lu26YeMKQogICAgLy8gcm91dGVyLnB1c2goJy9sb2dpbicpCiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8g6K+35rGC5oum5oiqIOWTjeW6lOaLpuaIqiBJbnRlcmNlcHRvcnMg5oum5oiq5ZmoCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICBpZiAocmVzLmRhdGEuY29kZSA9PSA0MDAxKSB7CiAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpOwogICAgRWxNZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogIH0KCiAgcmV0dXJuIHJlcy5kYXRhOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/api/api.js"],"names":["axios","router","ElMessage","defaults","baseURL","process","env","VUE_APP_EXTERNAL_LINK","timeout","interceptors","request","use","config","cache","userList","JSON","parse","sessionStorage","getItem","console","log","token","headers","error","Promise","reject","response","res","data","code","clear","message","push","err"],"mappings":";AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,SAAT,QAA0B,cAA1B,C,CACA;;AACAF,KAAK,CAACG,QAAN,CAAeC,OAAf,GAAyBC,OAAO,CAACC,GAAR,CAAYC,qBAArC;AACAP,KAAK,CAACG,QAAN,CAAeK,OAAf,GAAyB,IAAzB,C,CACA;AACA;;AACAR,KAAK,CAACS,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACrCA,EAAAA,MAAM,CAACC,KAAP,GAAe,KAAf;AACA,MAAIC,QAAQ,GAAEC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAX,CAAd,CAFqC,CAGnC;;AACF,MAAIJ,QAAJ,EAAc;AACVK,IAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;;AACA,QAAGA,QAAQ,CAACO,KAAZ,EAAkB;AACdT,MAAAA,MAAM,CAACU,OAAP,CAAe,eAAf,IAAiCR,QAAQ,CAACO,KAA1C;AACH;AACJ,GALD,MAKO,CACH;AACA;AACH;;AACD,SAAOT,MAAP;AACC,CAdL,EAeI,UAAAW,KAAK,EAAI;AACP,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACL,CAjBD,E,CAmBA;;AACAvB,KAAK,CAACS,YAAN,CAAmBiB,QAAnB,CAA4Bf,GAA5B,CACI,UAACgB,GAAD,EAAS;AACL,MAAGA,GAAG,CAACC,IAAJ,CAASC,IAAT,IAAe,IAAlB,EAAuB;AACnBZ,IAAAA,cAAc,CAACa,KAAf;AACA5B,IAAAA,SAAS,CAACqB,KAAV,CAAgBI,GAAG,CAACC,IAAJ,CAASG,OAAzB;AACA9B,IAAAA,MAAM,CAAC+B,IAAP,CAAY,QAAZ;AACH;;AACD,SAAOL,GAAG,CAACC,IAAX;AACH,CARL,EASI,UAACK,GAAD,EAAS;AACLT,EAAAA,OAAO,CAACC,MAAR,CAAeQ,GAAf;AACH,CAXL;AAcA,eAAejC,KAAf","sourcesContent":["// 请求接口\nimport axios from \"axios\";\nimport router from '../router'\nimport { ElMessage } from 'element-plus'\n// 设置默认访问路径\naxios.defaults.baseURL = process.env.VUE_APP_EXTERNAL_LINK;\naxios.defaults.timeout = 2000;\n// 在封装axios的文件中添加拦截器\n// 添加请求拦截器，在请求头中加token\naxios.interceptors.request.use(config => {\n    config.cache = false\n    let userList= JSON.parse(sessionStorage.getItem('userList'))\n      // 判断本地的cookie中是否有token\n    if (userList) {\n        console.log(userList)\n        if(userList.token){\n            config.headers['authorization'] =userList.token\n        }\n    } else {\n        // 跳转到登录页面(这里使用router，是因为路由文件引入到了此文件里)\n        // router.push('/login')\n    }\n    return config\n    },\n    error => {\n      return Promise.reject(error)\n})\n  \n// 请求拦截 响应拦截 Interceptors 拦截器\naxios.interceptors.response.use(\n    (res) => {\n        if(res.data.code==4001){\n            sessionStorage.clear()\n            ElMessage.error(res.data.message);\n            router.push('/login')\n        }\n        return res.data;\n    },\n    (err) => {\n        Promise.reject(err);\n    }\n);\n\nexport default axios"]}]}