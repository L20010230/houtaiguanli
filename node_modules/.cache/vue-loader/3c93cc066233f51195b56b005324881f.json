{"remainingRequest":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/views/login/login.vue?vue&type=style&index=0&id=a49090ce&lang=less","dependencies":[{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/views/login/login.vue","mtime":1669541729000},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/css-loader/dist/cjs.js","mtime":1669614083819},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1669614084206},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/postcss-loader/src/index.js","mtime":1669614083990},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/less-loader/dist/cjs.js","mtime":1669614083923},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/cache-loader/dist/cjs.js","mtime":1669614083651},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1669614084013}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5sb2dpbi1ib3ggLmVsLWZvcm0taXRlbV9fbGFiZWx7CiAgY29sb3I6ICNmZmY7CiAgIHdpZHRoOiA4MHB4Owp9Ci5sb2dpbi1jb250YW5lcnsKICB3aWR0aDogMTAwdnc7CiAgaGVpZ2h0OiAxMDB2aDsKICAvLyBiYWNrZ3JvdW5kOiAjYWZkZmU0OwogIC8vIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20gcmlnaHQsICMzM2EzZGMsIHJnYigyNDUsIDE0OCwgMTQ4KSAyMCUsIzI1ODVhNiwjOWZmMzY4LCM5MGQ3ZWMpOwogIGJhY2tncm91bmQ6IHVybCgnLi4vLi4vYXNzZXRzL2ltZ3MvbG9naW4tYmoucG5nJyk7CiAgcG9zaXRpb246IHJlbGF0aXZlOwoKICAubG9naW4tdGl0bGV7CiAgICBmb250LXNpemU6IDI1cHg7CiAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgY29sb3I6ICNmZmY7CiAgfQogIC50b3AtYm94c3sKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgfQogIC5sb2dpbi1ib3h7CiAgICB3aWR0aDogNDMwcHg7CiAgICAvLyBoZWlnaHQ6IDQwMHB4OwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgICBiYWNrZ3JvdW5kOiB1cmwoJy4uLy4uL2Fzc2V0cy9pbWdzL2xvZ2luLWRsLnBuZycpOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOjUwJTsKICAgIGxlZnQ6IDUwJTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBwYWRkaW5nOiAzMHB4OwogICAgcGFkZGluZy1ib3R0b206IDEwcHg7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIH0KICAubG9naW4tYnRuewogICAgbWFyZ2luLXRvcDozMHB4OwogICAgd2lkdGg6IDIwMHB4OwogICAgZm9udC1zaXplOiAxNnB4OwogIH0KICAuZmxleHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgfQogIC52ZXJpLW1yewogICAgbWFyZ2luLXJpZ2h0OiAxMCU7CiAgfQogIC56Yy1idG57CiAgICBjb2xvcjogI2ZmZjsKICAgIGN1cnNvcjogcG9pbnRlcjsKICB9CiAgLnpjLWJ0bjpob3ZlcnsKICAgIGNvbG9yOiAjNDA5ZWZmOwogIH0KfQo="},{"version":3,"sources":["/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/views/login/login.vue"],"names":[],"mappings":"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","file":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/views/login/login.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"login-contaner\">\n\n \n  <div class=\"login-box\">\n    <div class=\"top-boxs\">\n        <h2 class=\"login-title\">{{lgzcSt==0?\"登录\":\"注册\"}}</h2>\n        <div class=\"zc-btn\" @click=\"lgzcBtn\" >{{lgzcSt==1?\"登录\":\"注册\"}}</div>\n    </div>\n    <el-form\n      :model=\"ruleForm\"\n      :rules=\"rules\"\n      ref=\"ruleForm\"\n      class=\"demo-ruleForm\"\n      @keydown=\"loginKeydown\"\n    >\n      <el-form-item label=\"用户名\" prop=\"username\">\n        <el-input v-model=\"ruleForm.username\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码\" prop=\"password\">\n        <el-input\n          type=\"password\"\n          v-model=\"ruleForm.password\"\n          autocomplete=\"off\"\n        ></el-input>\n      </el-form-item>\n        <el-form-item v-if=\"lgzcSt==1\"  label=\"确认密码\" prop=\"pass\">\n        <el-input\n          type=\"password\"\n          v-model=\"ruleForm.pass\"\n          autocomplete=\"off\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item  label=\"验证码\" prop=\"verificationCode\">\n        <div class=\"flex\">\n          <el-input\n            class=\"veri-mr\"\n            v-model=\"ruleForm.verificationCode\"\n          ></el-input>\n          <div @click=\"refreshCode\" style=\"cursor: pointer;\">\n              <Identify :identifyCode=\"identifyCode\" ></Identify>\n          </div>\n        </div>\n      </el-form-item>\n      <el-form-item >\n        <el-button v-if=\"lgzcSt==0\"  class=\"login-btn\" type=\"primary\" :disabled='showlogin' @click=\"submitForm('ruleForm')\">\n          {{showlogin?'登录中……':'登录'}}\n        </el-button>\n         <el-button v-if=\"lgzcSt==1\"  class=\"login-btn\" type=\"primary\" :disabled='showlogin' @click=\"submitZcForm('ruleForm')\">\n          {{showlogin?'注册中……':'注册'}}\n        </el-button>\n         \n      </el-form-item>\n    </el-form>\n  </div>\n   </div>\n</template>\n\n<script>\nimport { postLogin,getGetInfo,postRegister } from \"@/api/user\";\nimport Identify from './Identify.vue'\nimport md5 from 'js-md5';\nexport default {\n  components: {\n    Identify\n  },\n  data() {\n     var verificationCode = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入验证码\"));\n      } else if (value.length) {\n        if (this.ruleForm.verificationCode.toLowerCase() !== this.identifyCode.toLowerCase()) {\n           callback(new Error(\"请输入正确的验证码\"));\n        }\n        callback();\n      }\n    };\n     var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else if (value.length < 6) {\n        callback(new Error(\"您输入密码长度小于6位\"));\n      } else {\n\n        if (this.lgzcSt==1&&this.ruleForm.pass !== \"\") {\n          this.$refs.ruleForm.validateField(\"checkPass\");\n        }\n        callback();\n      }\n    };\n    var validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== this.ruleForm.password) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      lgzcSt:0,\n      // 验证码规则\n      identifyCodes: '123456789ABCDEFGHGKMNPQRSTUVWXYZabcdefghgkmnpqrstuvwxyz',\n      identifyCode:'',\n      ruleForm: {\n        username: \"\",\n        password: \"\",\n        verificationCode:\"\",\n        pass:\"\"\n      },\n      rules: {\n        username: [\n          { required: true, message: \"请输入用户名称\", trigger: \"blur\" },\n        ],\n        password: [{ required: true, validator: validatePass, trigger: \"blur\" }],\n        pass: [\n          { required: true, validator: validatePass2, trigger: \"blur\" },\n        ],\n        verificationCode: [\n          { required: true, message: \"请输入验证码\", trigger: \"blur\" },\n          { required: true, validator: verificationCode, trigger: \"blur\" }\n        ],\n      },\n      loading:{},\n      showlogin:false\n    };\n  },\n  created(){\n    sessionStorage.clear()\n  },\n  mounted() {\n    this.refreshCode()\n  },\n  methods: {\n    lgzcBtn(){\n     if( this.lgzcSt==0){\n       this.lgzcSt =1\n     }else{\n       this.lgzcSt = 0\n     }\n     this.refreshCode()\n    },\n    // 切换验证码\n    refreshCode() {\n      this.identifyCode = ''\n      this.makeCode(this.identifyCodes, 4)\n      // console.log(this.identifyCode)\n    },\n    // 生成随机验证码\n    makeCode(o, l) {\n      for (let i = 0; i<l; i++) {\n        this.identifyCode += this.identifyCodes[\n            Math.floor(Math.random() * (this.identifyCodes.length - 0) + 0)\n        ]\n      }\n    },\n    async postRegisters(doc) {\n      let data = await postRegister(doc);\n      if (data.code == 2000) {\n        this.$message.success({\n          message: \"注册成功\",\n          type: \"success\",\n        });\n        this.lgzcSt=0;\n        this.showlogin = false\n      } else {\n        this.showlogin = false\n        this.refreshCode()\n        this.$message.error(data.message);\n      }\n    },\n    // 注册\n    submitZcForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          let {username,password} = this.ruleForm\n          let psw2 = parseInt(password,16).toString()\n          password = md5(psw2)\n          this.postRegisters({\n              username,\n              password,\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 获取用户信息\n    async getGetInfos(doc){\n        let data = await getGetInfo(doc)\n        if(data.code===20000){\n           this.$store.dispatch('user/CloseTabList',[])\n            this.$store.dispatch('user/LoginSt',2)\n            this.$store.dispatch('user/UserList',data.data)\n            let userList =JSON.parse(sessionStorage.getItem('userList'))\n            sessionStorage.setItem('LoginSt',2)\n            sessionStorage.setItem('userList',JSON.stringify({...data.data,...userList}))\n            this.$router.replace('/main')\n            this.loading.close();\n            this.showlogin = false \n        }else{\n          this.loading.close();\n          this.$message.error(data.message);\n           this.showlogin = false \n        }\n         if(this.showlogin){\n          setTimeout(() => {\n            this.loading.close();\n            this.showlogin = false \n          }, 5000);\n        }\n    },\n    // 登录\n    async postLogins(doc){\n        this.loading = this.$loading({\n          lock: true,\n          text: '正在加载中',\n          spinner: 'el-icon-loading',\n          background: 'rgba(0, 0, 0, 0.7)'\n        });\n        this.showlogin = true \n        let data = await postLogin(doc)\n        if(!data){\n          this.loading.close();\n          this.refreshCode()\n          this.showlogin = false \n          this.$message.error('服务器异常请联系管理员');\n          return\n        }\n        if(data.code===20000){\n          this.$store.dispatch('user/Roterlist',[]);\n          this.$store.dispatch('user/RouterPath','/main/home');\n          \n          this.getGetInfos()\n          sessionStorage.setItem('userList',JSON.stringify(data.data))\n        } else{\n          this.loading.close();\n           this.refreshCode()\n          this.$message.error(data.message);\n          this.showlogin = false \n        }\n        if(this.showlogin){\n          setTimeout(() => {\n             this.refreshCode()\n            this.loading.close();\n            this.showlogin = false \n          }, 5000);\n        }\n    },\n    loginKeydown(e){\n      if(e.keyCode===13){\n        this.submitForm('ruleForm')\n      }\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          let {username,password} = this.ruleForm\n          let psw2 = parseInt(password,16).toString()\n          password = md5(psw2)\n          this.postLogins({\n            username,\n            password\n          })\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n  },\n};\n</script>\n<style lang=\"less\" >\n.login-box .el-form-item__label{\n  color: #fff;\n   width: 80px;\n}\n.login-contaner{\n  width: 100vw;\n  height: 100vh;\n  // background: #afdfe4;\n  // background-image: linear-gradient(to bottom right, #33a3dc, rgb(245, 148, 148) 20%,#2585a6,#9ff368,#90d7ec);\n  background: url('../../assets/imgs/login-bj.png');\n  position: relative;\n\n  .login-title{\n    font-size: 25px;\n    margin-bottom: 30px;\n    color: #fff;\n  }\n  .top-boxs{\n    display: flex;\n    justify-content: space-between;\n  }\n  .login-box{\n    width: 430px;\n    // height: 400px;\n    border-radius: 10px;\n     background: url('../../assets/imgs/login-dl.png');\n    position: absolute;\n    top:50%;\n    left: 50%;\n    transform: translate(-50%,-50%);\n    text-align: center;\n    padding: 30px;\n    padding-bottom: 10px;\n    box-sizing: border-box;\n  }\n  .login-btn{\n    margin-top:30px;\n    width: 200px;\n    font-size: 16px;\n  }\n  .flex{\n    display: flex;\n  }\n  .veri-mr{\n    margin-right: 10%;\n  }\n  .zc-btn{\n    color: #fff;\n    cursor: pointer;\n  }\n  .zc-btn:hover{\n    color: #409eff;\n  }\n}\n</style>"]}]}