{"remainingRequest":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lijiayu/Downloads/shangcheng-main/src/components/Basic-information/Dictionaries/dictionaries-peizhi.vue?vue&type=style&index=0&id=06df4552&lang=less&scoped=true","dependencies":[{"path":"/Users/lijiayu/Downloads/shangcheng-main/src/components/Basic-information/Dictionaries/dictionaries-peizhi.vue","mtime":1669541729000},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/css-loader/dist/cjs.js","mtime":1669614083819},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1669614084206},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/postcss-loader/src/index.js","mtime":1669614083990},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/less-loader/dist/cjs.js","mtime":1669614083923},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/cache-loader/dist/cjs.js","mtime":1669614083651},{"path":"/Users/lijiayu/Downloads/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1669614084013}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5tZW51LWFkZGJveCB7CiAgd2lkdGg6IDQ1dnc7CiAgbWFyZ2luOiBhdXRvOwogIGJhY2tncm91bmQ6ICNmZmY7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGJvcmRlci1yYWRpdXM6IDVweDsKfQoudGl0bGV7CiAgcGFkZGluZzogMTBweCAzMHB4OwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47CiAgIGNvbG9yOiAjNjA2MjY2Owp9Ci5idG4tYm94IHsKICBtYXJnaW4tdG9wOiAyMHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQouZGVtby1ydWxlRm9ybXsKICBtaW4taGVpZ2h0OiAzMHZoOwogIG1heC1oZWlnaHQ6IDcwdmg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBvdmVyZmxvdy15OiBzY3JvbGw7CiAgcGFkZGluZzogMjBweCAzMHB4OwogIHBhZGRpbmctYm90dG9tOiAwcHg7Cn0KLmljb25jYWx7CiAgZm9udC1zaXplOiAyM3B4OwogIGNvbG9yOiAjQzBDNENDOwp9Ci5pY29uY2FsOmhvdmVyewogIGNvbG9yOiAjRjU2QzZDOwp9Cg=="},{"version":3,"sources":["/Users/lijiayu/Downloads/shangcheng-main/src/components/Basic-information/Dictionaries/dictionaries-peizhi.vue"],"names":[],"mappings":"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","file":"/Users/lijiayu/Downloads/shangcheng-main/src/components/Basic-information/Dictionaries/dictionaries-peizhi.vue","sourceRoot":"","sourcesContent":["\n<template>\n  <div class=\"bullet-frame\">\n    <div class=\"menu-addbox\">\n      <div class=\"title\">\n       <h3>字典配置</h3>\n        <i class=\"el-icon-circle-close iconcal\" @click=\"menuadd\"></i>\n      </div>\n      <el-form\n        :model=\"ruleForm\"\n        :rules=\"rules\"\n        ref=\"ruleForm\"\n        label-width=\"100px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item label=\"字典KEY\" prop=\"dictionaryKey\">\n          <el-input v-model=\"ruleForm.dictionaryKey\" :disabled='!!rowList'></el-input>\n        </el-form-item>\n        <el-form-item label=\"字典名称\" prop=\"dictionaryName\">\n          <el-input v-model=\"ruleForm.dictionaryName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"使用状态\" prop=\"sidebar\">\n          <el-radio-group v-model=\"ruleForm.sidebar\">\n            <el-radio label=\"0\"> 使用 </el-radio>\n            <el-radio label=\"1\"> 禁用 </el-radio>\n          </el-radio-group>\n        </el-form-item>\n\n        <el-button\n          size=\"mini\"\n          type=\"danger\"\n          @click=\"addZdx()\"\n        >新增</el-button>\n        <el-table\n        ref=\"multipleTable\"\n        :data=\"ruleForm.list\"\n        tooltip-effect=\"dark\"\n        style=\"width: 100%\"\n\n        align=\"center\"\n        :highlight-current-row=\"true\"\n        :cell-style=\"{ textAlign: 'center' }\"\n        :header-cell-style=\"{ textAlign: 'center' }\"\n      >\n        <el-table-column label=\"字典KEY\">\n           <template #default=\"scope\">\n            <el-input v-model=\"ruleForm.list[scope.$index].dicKey\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column  label=\"字典名称\"> \n           <template #default=\"scope\">\n            <el-input v-model=\"ruleForm.list[scope.$index].dicValue\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column  label=\"显示顺序\" >\n          <template #default=\"scope\">\n            <el-input v-model=\"ruleForm.list[scope.$index].sortId\"></el-input>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"操作\" width=\"100\">\n          <template #default=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"danger\"\n              @click=\"handleDelete(scope.$index, scope.row)\"\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n        <el-form-item class=\"btn-box\">\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\n            >保存</el-button\n          >\n          <el-button @click=\"menuadd\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n<script>\nimport { postAddDictionaryPage,postAllDictionaryPage,postAddDictionaryList } from \"@/api/user\";\nexport default {\n  props: [\"menuadd\",\"rowList\"],\n  data() {\n    return {\n      ruleForm: {\n        id:this.rowList?.id,\n        dictionaryKey: this.rowList?this.rowList.dictionaryKey:'',\n        dictionaryName: this.rowList?this.rowList.dictionaryName:'',\n        sidebar: this.rowList?this.rowList.sidebar:'0',\n        list: [\n          {\n            dicKey:\"\",\n            dicValue:\"\",\n            sortId:\"0\",\n          },\n        ],\n        deleteList:[],\n      },\n      rules: {\n        dictionaryKey: [\n          { required: true, validator: this.validateDictionaryKey, trigger: \"blur\" }\n        ],\n        dictionaryName: [{ required: true, message: \"请输入字典名称\", trigger: \"blur\" }],\n        sidebar: [\n          {\n            required: true,\n            message: \"请选择使用状态\",\n            trigger: \"change\",\n          },\n        ],\n      },\n    };\n  },\n  created(){\n    this.postAllDictionaryPages()\n  },\n\n  methods: {\n      async validateDictionaryKey(rule, value, callback){\n        if (value === '') {\n          callback(new Error('请输入字典KEY'))\n        } else {\n            if(!this.rowList){\n              let data= await postAddDictionaryList({dictionaryKey:this.ruleForm.dictionaryKey});\n              if(data.code==2000){\n                callback()\n              }else{\n                this.$message.error(data.message);\n                callback(\"该字典已经存在\")\n              }\n            }else{\n               callback()\n            }\n           \n        }\n\n    },\n    // 获取字典配置列表\n    async postAllDictionaryPages(){\n      let data = await postAllDictionaryPage(this.rowList);\n      if (data.code == 2000) {\n        if(data.data.length){\n           this.ruleForm.list = data.data\n        }\n      }\n    },\n     addZdx(){\n        this.ruleForm.list.push({\n            dicKey:\"\",\n            dicValue:\"\",\n            sortId:\"0\",\n        })\n     },\n     handleDelete(index,row){\n       if(row.id){\n         this.ruleForm.deleteList.push(row.id)\n       }\n       this.ruleForm.list =  this.ruleForm.list.filter((item,indexs)=>indexs!=index);\n\n     },\n    // 添加接口\n    async postAddDictionaryPages(row) {\n      let data = await postAddDictionaryPage(row);\n      if (data.code == 2000) {\n        this.$message.success({\n          message: data.message,\n          type: \"success\",\n        });\n        this.menuadd(\"addshou\");\n      } else {\n        this.$message.error(data.message);\n      }\n    },\n    // 保存\n    submitForm(formName) {\n      if(!this.ruleForm.list.length){\n         this.$message.error('请至少录入一个选项');\n        return\n      }\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n            let dicKey =   this.ruleForm.list.some(item=>item.dicKey=='');\n            let dicValue =   this.ruleForm.list.some(item=>item.dicValue=='');\n            if(dicKey){\n               this.$message.error('键(KEY)不能为空');\n               return\n            }\n            if(dicValue){\n               this.$message.error('键值名称不能为空');\n               return\n            }\n             this.postAddDictionaryPages(this.ruleForm)\n        } else {\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.menu-addbox {\n  width: 45vw;\n  margin: auto;\n  background: #fff;\n  box-sizing: border-box;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 5px;\n}\n.title{\n  padding: 10px 30px;\n  display: flex;\n  justify-content:space-between;\n   color: #606266;\n}\n.btn-box {\n  margin-top: 20px;\n  text-align: center;\n}\n.demo-ruleForm{\n  min-height: 30vh;\n  max-height: 70vh;\n  overflow: hidden;\n  overflow-y: scroll;\n  padding: 20px 30px;\n  padding-bottom: 0px;\n}\n.iconcal{\n  font-size: 23px;\n  color: #C0C4CC;\n}\n.iconcal:hover{\n  color: #F56C6C;\n}\n</style>"]}]}