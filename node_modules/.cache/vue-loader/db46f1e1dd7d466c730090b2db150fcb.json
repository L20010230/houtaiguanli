{"remainingRequest":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/components/Basic-information/function-menu/Function-menu-main.vue?vue&type=style&index=0&id=135ca3ff&lang=less&scoped=true","dependencies":[{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/components/Basic-information/function-menu/Function-menu-main.vue","mtime":1669541729000},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/css-loader/dist/cjs.js","mtime":1669614083819},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1669614084206},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/postcss-loader/src/index.js","mtime":1669614083990},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/less-loader/dist/cjs.js","mtime":1669614083923},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/cache-loader/dist/cjs.js","mtime":1669614083651},{"path":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1669614084013}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5tZW51LWJveHMgewogIC8vIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoubWVudS1uYXZ7CiAgZGlzcGxheTogZmxleDsKfQoubWVudS1zaG91ewogIGZsZXg6MTsKfQouaW5wdXQtdXNlcnsKICB3aWR0aDogMzAlOwogIG1hcmdpbi1yaWdodDogMTBweDsKfQoudGFibGUtYm94YSB7CiAgbWFyZ2luOiAyMHB4IDA7Cn0KLm1lbnUtb3BlcmF0aW9uIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Cn0K"},{"version":3,"sources":["/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/components/Basic-information/function-menu/Function-menu-main.vue"],"names":[],"mappings":";AAyNA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACT,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACf;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACR;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACpB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3B","file":"/Users/lijiayu/alijiayu/jiayuan/shangcheng-main/src/components/Basic-information/function-menu/Function-menu-main.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"menu-boxs container-adapt\">\n     <div class=\"menu-nav\">\n      <div class=\"menu-shou\">\n        <el-input\n          class=\"input-user\"\n          placeholder=\"请输入内容用户名\"\n          v-model=\"title\"\n          clearable>\n        </el-input>\n         <el-button type=\"primary\" @click=\"postRouterpages\">查询</el-button>\n      </div>\n      <div class=\"menu-operation\">\n        <div>\n          <el-button type=\"primary\" @click=\"menuAdd\">添加</el-button>\n        </div>\n      </div>\n    </div>\n    <div class=\"table-boxa table-box-adapt\">\n      <el-table\n        ref=\"multipleTable\"\n        :data=\"tableData\"\n        tooltip-effect=\"dark\"\n        style=\"width: 100%\"\n        height='100%'\n        align=\"center\"\n        :highlight-current-row=\"true\"\n        :cell-style=\"{ textAlign: 'center' }\"\n        :header-cell-style=\"{ textAlign: 'center' }\"\n      >\n        <!-- <el-table-column type=\"selection\"> </el-table-column> -->\n        <el-table-column prop=\"title\" label=\"菜单名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"sortid\" label=\"显示顺序\" width=\"100\">\n        </el-table-column>\n        <el-table-column prop=\"pid\" label=\"上级菜单\" width=\"150\">\n          <template #default=\"scope\">{{\n            scope.row.pid == 0 ? \"根菜单\" : fnPid(scope.row.pid)\n          }}</template>\n        </el-table-column>\n        <el-table-column prop=\"icon\" label=\"图标\" width=\"50\">\n          <template #default=\"scope\">\n             <i :class=\"scope.row.icon\"></i>\n           </template>\n        </el-table-column>\n         <el-table-column prop=\"path\" label=\"路由地址\"> </el-table-column>\n        <el-table-column prop=\"redirect\" label=\"重定向\"> </el-table-column>\n        <el-table-column prop=\"component\" label=\"组件路径\"> </el-table-column>\n\n        <el-table-column prop=\"sidebar\" label=\"使用状态\" width=\"150\">\n          <template #default=\"scope\">{{\n            scope.row.sidebar == 1 ? \"已在侧边栏使用\" : \"未在侧边栏使用\"\n          }}</template>\n        </el-table-column>\n\n        <el-table-column label=\"操作\" width=\"150\">\n          <template #default=\"scope\">\n            <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\"\n              >编辑</el-button\n            >\n            <el-popconfirm\n              confirmButtonText=\"确定\"\n              cancelButtonText=\"取消\"\n              icon=\"el-icon-info\"\n              iconColor=\"red\"\n              title=\"确定要删除吗？\"\n              @confirm=\"handleDelete(scope.$index, scope.row)\"\n            >\n              <template #reference>\n                <el-button  size=\"mini\" type=\"danger\">删除</el-button>\n              </template>\n            </el-popconfirm>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div class=\"menu-operation block\" style=\"margin-top: 20px\" v-if=\"total\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-size=\"size\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      >\n      </el-pagination>\n    </div>\n    <!-- 添编辑加弹框 -->\n    <FunctionMenuAdd\n      v-if=\"ishouAdd\"\n      :menuadd=\"menuAdd\"\n      :rowlist=\"rowList\"\n    ></FunctionMenuAdd>\n  </div>\n</template>\n<script>\nimport FunctionMenuAdd from './Function-menu-add'\nimport { postDeleteRouterpage,AllQueryRouterList } from \"../../../api/user\";\nexport default {\n  data() {\n    return {\n      ishouAdd: false,\n      currentPage: 1,\n      tableData: [],\n      multipleSelection: [],\n      height: \"17\",\n      total: 1,\n      size: 10,\n      rowList: {},\n      title:'',\n      loading:{},\n      routerData:[],\n    };\n  },\n  components: {\n    FunctionMenuAdd,\n  },\n  mounted() {\n    this.postSelectRouterpages();\n    this.postRouterpages();\n  },\n  computed: {},\n  methods: {\n    fnPid(pid) {\n      if (pid != undefined) {\n        let aa = this.routerData.find((item) => item.id == pid);\n        return aa?aa.title:'上级菜单已删除请进行修改';\n      }\n    },\n    // 获取\n    async postRouterpages() {\n       let data = {\n          size:this.size,\n          currentPage:this.currentPage\n      }\n      if(this.title){\n        data.title = this.title\n      }\n      this.loading = this.$loading({\n          lock: true,\n          text: '正在加载中',\n          spinner: 'el-icon-loading',\n          background: 'rgba(0, 0, 0, 0.7)'\n        });\n      let router = await AllQueryRouterList(data);\n      if (router.code == 2000) {\n        this.tableData = router.data;\n        this.total = router.total\n        this.loading.close();\n      } else {\n        this.loading.close();\n        this.$message.error(router.message);\n      }\n    },\n    // 获取上级菜单\n    async postSelectRouterpages() {\n      this.loading = this.$loading({\n          lock: true,\n          text: '正在加载中',\n          spinner: 'el-icon-loading',\n          background: 'rgba(0, 0, 0, 0.7)'\n        });\n      let router = await AllQueryRouterList();\n      if (router.code == 2000) {\n        this.routerData = router.data;\n        this.loading.close();\n      } else {\n        this.loading.close();\n        this.$message.error(router.message);\n      }\n    },\n    // 删除\n    async postDeleteRouterpages(row) {\n      let data = await postDeleteRouterpage(row);\n      if (data.code == 2000) {\n        this.$message.success({\n          message: data.message,\n          type: \"success\",\n        });\n        this.postRouterpages();\n        this.postSelectRouterpages()\n      } else {\n        this.loading.close();\n        this.$message.error(data.message);\n      }\n    },\n\n    menuAdd(ishow) {\n      if (ishow == \"addshou\") {\n        this.postRouterpages();\n         this.postSelectRouterpages()\n      }\n      this.rowList = {};\n      this.ishouAdd = !this.ishouAdd;\n    },\n    handleSizeChange(val) {\n      this.size = val;\n      this.postRouterpages();\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.postRouterpages();\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    handleEdit(index, row) {\n      this.rowList = JSON.parse(JSON.stringify(row));\n      this.ishouAdd = true;\n    },\n    handleDelete(index, row) {\n      this.postDeleteRouterpages(row);\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.menu-boxs {\n  // position: relative;\n}\n.menu-nav{\n  display: flex;\n}\n.menu-shou{\n  flex:1;\n}\n.input-user{\n  width: 30%;\n  margin-right: 10px;\n}\n.table-boxa {\n  margin: 20px 0;\n}\n.menu-operation {\n  display: flex;\n  justify-content: flex-end;\n}\n</style>"]}]}